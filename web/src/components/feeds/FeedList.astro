---
import FeedItem from "./FeedItem.astro";
import AddFeedModal from "./AddFeedModal.astro";
import { GLOBAL } from "../../lib/variables";
import type { Feed } from "../../lib/samples/feeds";

interface Props {
  feeds: Feed[];
}

const { feeds } = Astro.props;
---

<div class="flex flex-col gap-8">
  <div class="flex justify-between items-center">
    <h2 class="text-2xl font-bold">{GLOBAL.projectTitle}</h2>
    <button
      id="addFeedBtn"
      class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
    >
      Add Feed
    </button>
  </div>
  
  {feeds.length > 0 ? (
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {feeds.map((feed) => (
        <FeedItem feed={feed} />
      ))}
    </div>
  ) : (
    <div class="text-center py-12">
      <p class="text-gray-600 dark:text-gray-400">{GLOBAL.noProjects}</p>
    </div>
  )}
</div>

<AddFeedModal isOpen={false} />

<script>
  const modal = document.getElementById('addFeedModal');
  const addFeedBtn = document.getElementById('addFeedBtn');

  if (addFeedBtn) {
    addFeedBtn.addEventListener('click', () => {
      if (modal) {
        modal.classList.remove('hidden');
      }
    });
  }
</script> 